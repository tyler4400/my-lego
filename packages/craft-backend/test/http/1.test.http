### hello world
GET {{host}}:{{port}}/{{prefix}}/{{version}}/

### 测试版本号
POST {{host}}:{{port}}/{{prefix}}/v2

### 期望报错 全局过滤器
GET {{host}}:{{port}}/{{prefix}}/{{version}}/error

### ping
GET {{host}}:{{port}}/{{prefix}}/{{version}}/ping

### 测试redis-设置值
GET {{host}}:{{port}}/{{prefix}}/{{version}}/set-redis?value={{$random.address.cityName}}

### 测试redis(返回上一步设置的值)
GET {{host}}:{{port}}/{{prefix}}/{{version}}/get-redis?key=nest-template

### mongo-ping（阶段1：验证 Mongo 连接）
GET {{host}}:{{port}}/{{prefix}}/{{version}}/mongo-ping

### mongo-seed（阶段1：写入测试 user/work，验证 schema/自增 id）
POST {{host}}:{{port}}/{{prefix}}/{{version}}/mongo-seed
Content-Type: application/json

{
  "username": "tyler@3.copm"
}

> {% client.global.set("mongo_user_id", response.body.data.user._id);

  client.test("测试 mongo-seed 接口", function () {
    client.assert(response.body.code === 0, "Response code is not '0'");
    client.assert(response.body.data.user.id !== undefined, "user 自增 id 生成失败");
    client.assert(response.body.data.work.id !== undefined, "work 自增 id 生成失败");
  });
%}

### demo 场景 A：成功返回（MetaResponseInterceptor）
GET {{host}}:{{port}}/{{prefix}}/{{version}}/demo/success

> {%
  client.test("demo success", function () {
    client.assert(response.body.code === 0, "code 应为 0");
    client.assert(response.body.data.hello === "world", "data.hello 应为 world");
    client.assert(response.body.traceId !== undefined, "traceId 缺失");
    client.assert(response.body.requestTime !== undefined, "requestTime 缺失");
    client.assert(response.body.protocol === "default", "protocol 不正确");
  });
%}

### demo 场景 B：业务异常 BizException（MetaExceptionFilter Biz 分支）
GET {{host}}:{{port}}/{{prefix}}/{{version}}/demo/biz-exception

> {%
  client.test("demo biz exception", function () {
    client.assert(response.body.code === 101002, "code 应为 createUserAlreadyExists 的 errno=101002");
    client.assert(response.body.message !== undefined, "message 缺失");
  });
%}

### demo 场景 C：DTO 校验失败（ValidationPipe -> BizException(userValidateFail)）
POST {{host}}:{{port}}/{{prefix}}/{{version}}/demo/validate
Content-Type: application/json

{
  "email": "not-an-email",
  "password": "123"
}

> {%
  client.test("demo validate fail", function () {
    client.assert(response.body.code === 101001, "code 应为 userValidateFail 的 errno=101001");
    client.assert(response.body.data !== null, "data 不应为空");
    client.assert(response.body.data.errors !== undefined, "data.errors 缺失");
  });
%}

### demo 场景 D-1：系统异常 BadRequestException（MetaExceptionFilter HttpException 分支）
GET {{host}}:{{port}}/{{prefix}}/{{version}}/demo/bad-request

> {%
  client.test("demo bad request", function () {
    client.assert(response.body.code === 400, "code 应为 httpStatus=400");
    client.assert(response.body.message !== undefined, "message 缺失");
  });
%}

### demo 场景 D-2：系统异常 UnauthorizedException（MetaExceptionFilter HttpException 分支）
GET {{host}}:{{port}}/{{prefix}}/{{version}}/demo/unauthorized

> {%
  client.test("demo unauthorized", function () {
    client.assert(response.body.code === 401, "code 应为 httpStatus=401");
    client.assert(response.body.message !== undefined, "message 缺失");
  });
%}
